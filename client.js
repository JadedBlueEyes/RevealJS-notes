/* revealjs-notes v1.0.0 Â©2019 Joel Ellis */!function(){var e,t,n,r,a,o,s,i={},u=0,l=!1,c={default:"Default",wide:"Wide",tall:"Tall","notes-only":"Notes only"};!function(){for(var e in s=document.querySelector(".speaker-layout-dropdown"),o=document.querySelector(".speaker-layout-label"),c){var t=document.createElement("option");t.setAttribute("value",e),t.textContent=c[e],s.appendChild(t)}s.addEventListener("change",function(){S(s.value)},!1),S(function(){if(w()){var e=window.localStorage.getItem("reveal-speaker-layout");if(e)return e}for(var t in c)return t}())}();var d,m,g,v=document.querySelector("#connection-status"),p=setTimeout(function(){v.innerHTML="Error connecting to main window.<br>Please try closing and reopening the speaker view."},5e3);function f(e,t,n){var r=++u;i[r]=n,window.opener.postMessage(JSON.stringify({namespace:"reveal-notes",type:"call",callId:r,methodName:e,arguments:t}),"*")}function y(o){n=JSON.stringify(o.state),o.notes?(e.classList.remove("hidden"),t.style.whiteSpace=o.whitespace,o.markdown?t.innerHTML=marked(o.notes):t.innerHTML=o.notes):e.classList.add("hidden"),r.contentWindow.postMessage(JSON.stringify({method:"setState",args:[o.state]}),"*"),a.contentWindow.postMessage(JSON.stringify({method:"setState",args:[o.state]}),"*"),a.contentWindow.postMessage(JSON.stringify({method:"next"}),"*")}function h(e,t){f("getSlidePastCount",[],function(n){var r=0;for(var a in e.slice(0,n+1))r+=e[a];t(r)})}function S(e){var t=c[e];o.innerHTML="Layout"+(t?": "+t:""),s.value=e,document.body.setAttribute("data-speaker-layout",e),w()&&window.localStorage.setItem("reveal-speaker-layout",e)}function w(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return!1}}function M(e){var t="00"+parseInt(e);return t.substring(t.length-2)}window.addEventListener("message",function(o){clearTimeout(p),v.style.display="none";var s=JSON.parse(o.data);s.state&&delete s.state.overview,s&&"reveal-notes"===s.namespace?"connect"===s.type?function(n){!1===l&&(l=!0,function(e){var t="receiver&progress=false&history=false&transition=none&autoSlide=0&backgroundTransition=none",n=/\?/.test(e.url)?"&":"?",o="#/"+e.state.indexh+"/"+e.state.indexv,s=e.url+n+t+"&postMessageEvents=true"+o,i=e.url+n+t+"&controls=false"+o;(r=document.createElement("iframe")).setAttribute("width",1280),r.setAttribute("height",1024),r.setAttribute("src",s),document.querySelector("#current-slide").appendChild(r),(a=document.createElement("iframe")).setAttribute("width",640),a.setAttribute("height",512),a.setAttribute("src",i),document.querySelector("#upcoming-slide").appendChild(a)}(n),document.addEventListener("keydown",function(e){if(116===e.keyCode||e.metaKey&&82===e.keyCode)return e.preventDefault(),!1;r.contentWindow.postMessage(JSON.stringify({method:"triggerKey",args:[e.keyCode]}),"*")}),e=document.querySelector(".speaker-controls-notes"),t=document.querySelector(".speaker-controls-notes .value"),function(){var e,t=new Date,n=document.querySelector(".speaker-controls-time"),r=n.querySelector(".clock-value"),a=n.querySelector(".hours-value"),o=n.querySelector(".minutes-value"),s=n.querySelector(".seconds-value"),i=n.querySelector(".pacing-title"),u=n.querySelector(".pacing"),l=u.querySelector(".hours-value"),c=u.querySelector(".minutes-value"),d=u.querySelector(".seconds-value"),m=null;function g(e,t,n,r){var a=-1==Math.sign(r)?"-":"",o=(r=Math.abs(Math.round(r/1e3)))%60,s=Math.floor(r/60)%60,i=Math.floor(r/3600);e.innerHTML=a+M(i),0==i?e.classList.add("mute"):e.classList.remove("mute"),t.innerHTML=":"+M(s),0==i&&0==s?t.classList.add("mute"):t.classList.remove("mute"),n.innerHTML=":"+M(o)}function v(){var e,n=new Date;e=n.getTime()-t.getTime(),r.innerHTML=n.toLocaleTimeString("en-US",{hour12:!0,hour:"2-digit",minute:"2-digit"}),g(a,o,s,e),null!==m&&function(e){h(m,function(t){var n=1e3*t;f("getSlidePastCount",[],function(t){var r=1e3*m[t],a=n-e;u.className=a<0?"pacing behind":a<r?"pacing on-track":"pacing ahead",g(l,c,d,a)})})}(e)}e=function(e){m=e,null!==e&&(i.style.removeProperty("display"),u.style.removeProperty("display")),v(),setInterval(v,1e3)},f("getSlidesAttributes",[],function(t){f("getConfig",[],function(n){var r=n.defaultTiming;if(null!=r){var a=[];for(var o in t){var s=t[o],i=r;if(s.hasOwnProperty("data-timing")){var u=s["data-timing"];isNaN(i=parseInt(u))&&(i=r)}a.push(i)}e(a)}else e(null)})}),n.addEventListener("click",function(){return null==m?(t=new Date,v()):h(m,function(e){var n=1e3*e;f("getSlidePastCount",[],function(e){var r=1e3*m[e],a=n-r;t=new Date((new Date).getTime()-a),v()})}),!1})}())}(s):"state"===s.type?y(s):"return"===s.type&&(i[s.callId](s.result),delete i[s.callId]):s&&"reveal"===s.namespace&&(/ready/.test(s.eventName)?window.opener.postMessage(JSON.stringify({namespace:"reveal-notes",type:"connected"}),"*"):/slidechanged|fragmentshown|fragmenthidden|paused|resumed/.test(s.eventName)&&n!==JSON.stringify(s.state)&&window.opener.postMessage(JSON.stringify({method:"setState",args:[s.state]}),"*"))}),d=y,g=0,y=function(){var e=arguments,t=this;clearTimeout(m);var n=Date.now()-g;n>200?(d.apply(t,e),g=Date.now()):m=setTimeout(function(){d.apply(t,e),g=Date.now()},200-n)}}();